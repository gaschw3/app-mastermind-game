var e,t,n,l,r,o,s,i={},c=[],_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function a(e,t){for(var n in t)e[n]=t[n];return e}function u(e){var t=e.parentNode;t&&t.removeChild(e)}function d(e,l,r,o,s){var i={type:e,props:l,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==s?++n:s};return null==s&&null!=t.vnode&&t.vnode(i),i}function h(e){return e.children}function f(e,t){this.props=e,this.context=t}function p(e,t){if(null==t)return e.__?p(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?p(e):null}function m(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return m(e)}}function v(e){(!e.__d&&(e.__d=!0)&&l.push(e)&&!b.__r++||r!==t.debounceRendering)&&((r=t.debounceRendering)||o)(b)}function b(){var e,t,n,r,o,i,c,_;for(l.sort(s);e=l.shift();)e.__d&&(t=l.length,r=void 0,o=void 0,c=(i=(n=e).__v).__e,(_=n.__P)&&(r=[],(o=a({},i)).__v=i.__v+1,E(_,i,o,n.__n,void 0!==_.ownerSVGElement,null!=i.__h?[c]:null,r,null==c?p(i):c,i.__h),H(r,i),i.__e!=c&&m(i)),l.length>t&&l.sort(s));b.__r=0}function g(e,t,n,l,r,o,s,_,a,u){var f,m,v,b,g,x,S,C=l&&l.__k||c,U=C.length;for(n.__k=[],f=0;f<t.length;f++)if(null!=(b=n.__k[f]=null==(b=t[f])||"boolean"==typeof b||"function"==typeof b?null:"string"==typeof b||"number"==typeof b||"bigint"==typeof b?d(null,b,null,null,b):Array.isArray(b)?d(h,{children:b},null,null,null):b.__b>0?d(b.type,b.props,b.key,b.ref?b.ref:null,b.__v):b)){if(b.__=n,b.__b=n.__b+1,null===(v=C[f])||v&&b.key==v.key&&b.type===v.type)C[f]=void 0;else for(m=0;m<U;m++){if((v=C[m])&&b.key==v.key&&b.type===v.type){C[m]=void 0;break}v=null}E(e,b,v=v||i,r,o,s,_,a,u),g=b.__e,(m=b.ref)&&v.ref!=m&&(S||(S=[]),v.ref&&S.push(v.ref,null,b),S.push(m,b.__c||g,b)),null!=g?(null==x&&(x=g),"function"==typeof b.type&&b.__k===v.__k?b.__d=a=y(b,a,e):a=w(e,b,v,C,g,a),"function"==typeof n.type&&(n.__d=a)):a&&v.__e==a&&a.parentNode!=e&&(a=p(v))}for(n.__e=x,f=U;f--;)null!=C[f]&&("function"==typeof n.type&&null!=C[f].__e&&C[f].__e==n.__d&&(n.__d=k(l).nextSibling),A(C[f],C[f]));if(S)for(f=0;f<S.length;f++)M(S[f],S[++f],S[++f])}function y(e,t,n){for(var l,r=e.__k,o=0;r&&o<r.length;o++)(l=r[o])&&(l.__=e,t="function"==typeof l.type?y(l,t,n):w(n,l,l,r,l.__e,t));return t}function w(e,t,n,l,r,o){var s,i,c;if(void 0!==t.__d)s=t.__d,t.__d=void 0;else if(null==n||r!=o||null==r.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(r),s=null;else{for(i=o,c=0;(i=i.nextSibling)&&c<l.length;c+=1)if(i==r)break e;e.insertBefore(r,o),s=o}return void 0!==s?s:r.nextSibling}function k(e){var t,n,l;if(null==e.type||"string"==typeof e.type)return e.__e;if(e.__k)for(t=e.__k.length-1;t>=0;t--)if((n=e.__k[t])&&(l=k(n)))return l;return null}function x(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||_.test(t)?n:n+"px"}function S(e,t,n,l,r){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof l&&(e.style.cssText=l=""),l)for(t in l)n&&t in n||x(e.style,t,"");if(n)for(t in n)l&&n[t]===l[t]||x(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?l||e.addEventListener(t,o?U:C,o):e.removeEventListener(t,o?U:C,o);else if("dangerouslySetInnerHTML"!==t){if(r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function C(e){return this.l[e.type+!1](t.event?t.event(e):e)}function U(e){return this.l[e.type+!0](t.event?t.event(e):e)}function E(n,l,r,o,s,c,_,d,m){var v,b,y,w,k,x,C,U,E,H,M,A,T,q,G,L=l.type;if(void 0!==l.constructor)return null;null!=r.__h&&(m=r.__h,d=l.__e=r.__e,l.__h=null,c=[d]),(v=t.__b)&&v(l);try{e:if("function"==typeof L){if(U=l.props,E=(v=L.contextType)&&o[v.__c],H=v?E?E.props.value:v.__:o,r.__c?C=(b=l.__c=r.__c).__=b.__E:("prototype"in L&&L.prototype.render?l.__c=b=new L(U,H):(l.__c=b=new f(U,H),b.constructor=L,b.render=N),E&&E.sub(b),b.props=U,b.state||(b.state={}),b.context=H,b.__n=o,y=b.__d=!0,b.__h=[],b._sb=[]),null==b.__s&&(b.__s=b.state),null!=L.getDerivedStateFromProps&&(b.__s==b.state&&(b.__s=a({},b.__s)),a(b.__s,L.getDerivedStateFromProps(U,b.__s))),w=b.props,k=b.state,b.__v=l,y)null==L.getDerivedStateFromProps&&null!=b.componentWillMount&&b.componentWillMount(),null!=b.componentDidMount&&b.__h.push(b.componentDidMount);else{if(null==L.getDerivedStateFromProps&&U!==w&&null!=b.componentWillReceiveProps&&b.componentWillReceiveProps(U,H),!b.__e&&null!=b.shouldComponentUpdate&&!1===b.shouldComponentUpdate(U,b.__s,H)||l.__v===r.__v){for(l.__v!==r.__v&&(b.props=U,b.state=b.__s,b.__d=!1),b.__e=!1,l.__e=r.__e,l.__k=r.__k,l.__k.forEach((function(e){e&&(e.__=l)})),M=0;M<b._sb.length;M++)b.__h.push(b._sb[M]);b._sb=[],b.__h.length&&_.push(b);break e}null!=b.componentWillUpdate&&b.componentWillUpdate(U,b.__s,H),null!=b.componentDidUpdate&&b.__h.push((function(){b.componentDidUpdate(w,k,x)}))}if(b.context=H,b.props=U,b.__P=n,A=t.__r,T=0,"prototype"in L&&L.prototype.render){for(b.state=b.__s,b.__d=!1,A&&A(l),v=b.render(b.props,b.state,b.context),q=0;q<b._sb.length;q++)b.__h.push(b._sb[q]);b._sb=[]}else do{b.__d=!1,A&&A(l),v=b.render(b.props,b.state,b.context),b.state=b.__s}while(b.__d&&++T<25);b.state=b.__s,null!=b.getChildContext&&(o=a(a({},o),b.getChildContext())),y||null==b.getSnapshotBeforeUpdate||(x=b.getSnapshotBeforeUpdate(w,k)),G=null!=v&&v.type===h&&null==v.key?v.props.children:v,g(n,Array.isArray(G)?G:[G],l,r,o,s,c,_,d,m),b.base=l.__e,l.__h=null,b.__h.length&&_.push(b),C&&(b.__E=b.__=null),b.__e=!1}else null==c&&l.__v===r.__v?(l.__k=r.__k,l.__e=r.__e):l.__e=function(t,n,l,r,o,s,c,_){var a,d,h,f=l.props,m=n.props,v=n.type,b=0;if("svg"===v&&(o=!0),null!=s)for(;b<s.length;b++)if((a=s[b])&&"setAttribute"in a==!!v&&(v?a.localName===v:3===a.nodeType)){t=a,s[b]=null;break}if(null==t){if(null===v)return document.createTextNode(m);t=o?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,m.is&&m),s=null,_=!1}if(null===v)f===m||_&&t.data===m||(t.data=m);else{if(s=s&&e.call(t.childNodes),d=(f=l.props||i).dangerouslySetInnerHTML,h=m.dangerouslySetInnerHTML,!_){if(null!=s)for(f={},b=0;b<t.attributes.length;b++)f[t.attributes[b].name]=t.attributes[b].value;(h||d)&&(h&&(d&&h.__html==d.__html||h.__html===t.innerHTML)||(t.innerHTML=h&&h.__html||""))}if(function(e,t,n,l,r){var o;for(o in n)"children"===o||"key"===o||o in t||S(e,o,null,n[o],l);for(o in t)r&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===t[o]||S(e,o,t[o],n[o],l)}(t,m,f,o,_),h)n.__k=[];else if(b=n.props.children,g(t,Array.isArray(b)?b:[b],n,l,r,o&&"foreignObject"!==v,s,c,s?s[0]:l.__k&&p(l,0),_),null!=s)for(b=s.length;b--;)null!=s[b]&&u(s[b]);_||("value"in m&&void 0!==(b=m.value)&&(b!==t.value||"progress"===v&&!b||"option"===v&&b!==f.value)&&S(t,"value",b,f.value,!1),"checked"in m&&void 0!==(b=m.checked)&&b!==t.checked&&S(t,"checked",b,f.checked,!1))}return t}(r.__e,l,r,o,s,c,_,m);(v=t.diffed)&&v(l)}catch(n){l.__v=null,(m||null!=c)&&(l.__e=d,l.__h=!!m,c[c.indexOf(d)]=null),t.__e(n,l,r)}}function H(e,n){t.__c&&t.__c(n,e),e.some((function(n){try{e=n.__h,n.__h=[],e.some((function(e){e.call(n)}))}catch(e){t.__e(e,n.__v)}}))}function M(e,n,l){try{"function"==typeof e?e(n):e.current=n}catch(e){t.__e(e,l)}}function A(e,n,l){var r,o;if(t.unmount&&t.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||M(r,null,n)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){t.__e(e,n)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&A(r[o],n,l||"function"!=typeof e.type);l||null==e.__e||u(e.__e),e.__=e.__e=e.__d=void 0}function N(e,t,n){return this.constructor(e,n)}function T(n,l,r){var o,s,c;t.__&&t.__(n,l),s=(o="function"==typeof r)?null:r&&r.__k||l.__k,c=[],E(l,n=(!o&&r||l).__k=function(t,n,l){var r,o,s,i={};for(s in n)"key"==s?r=n[s]:"ref"==s?o=n[s]:i[s]=n[s];if(arguments.length>2&&(i.children=arguments.length>3?e.call(arguments,2):l),"function"==typeof t&&null!=t.defaultProps)for(s in t.defaultProps)void 0===i[s]&&(i[s]=t.defaultProps[s]);return d(t,i,r,o,null)}(h,null,[n]),s||i,i,void 0!==l.ownerSVGElement,!o&&r?[r]:s?null:l.firstChild?e.call(l.childNodes):null,c,!o&&r?r:s?s.__e:l.firstChild,o),H(c,n)}e=c.slice,t={__e:function(e,t,n,l){for(var r,o,s;t=t.__;)if((r=t.__c)&&!r.__)try{if((o=r.constructor)&&null!=o.getDerivedStateFromError&&(r.setState(o.getDerivedStateFromError(e)),s=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,l||{}),s=r.__d),s)return r.__E=r}catch(t){e=t}throw e}},n=0,f.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=a({},this.state),"function"==typeof e&&(e=e(a({},n),this.props)),e&&a(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),v(this))},f.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),v(this))},f.prototype.render=h,l=[],o="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,s=function(e,t){return e.__v.__b-t.__v.__b},b.__r=0;var q=0;function G(e,n,l,r,o,s){var i,c,_={};for(c in n)"ref"==c?i=n[c]:_[c]=n[c];var a={type:e,props:_,key:l,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--q,__source:o,__self:s};if("function"==typeof e&&(i=e.defaultProps))for(c in i)void 0===_[c]&&(_[c]=i[c]);return t.vnode&&t.vnode(a),a}var L,P,F,D,I=0,V=[],W=[],j=t.__b,R=t.__r,$=t.diffed,O=t.__c,z=t.unmount;function B(e,n){t.__h&&t.__h(P,e,I||n),I=0;var l=P.__H||(P.__H={__:[],__h:[]});return e>=l.__.length&&l.__.push({__V:W}),l.__[e]}function Y(e){return I=1,function(e,t,n){var l=B(L++,2);if(l.t=e,!l.__c&&(l.__=[n?n(t):le(void 0,t),function(e){var t=l.__N?l.__N[0]:l.__[0],n=l.t(t,e);t!==n&&(l.__N=[n,l.__[1]],l.__c.setState({}))}],l.__c=P,!P.u)){var r=function(e,t,n){if(!l.__c.__H)return!0;var r=l.__c.__H.__.filter((function(e){return e.__c}));if(r.every((function(e){return!e.__N})))return!o||o.call(this,e,t,n);var s=!1;return r.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}})),!(!s&&l.__c.props===e)&&(!o||o.call(this,e,t,n))};P.u=!0;var o=P.shouldComponentUpdate,s=P.componentWillUpdate;P.componentWillUpdate=function(e,t,n){if(this.__e){var l=o;o=void 0,r(e,t,n),o=l}s&&s.call(this,e,t,n)},P.shouldComponentUpdate=r}return l.__N||l.__}(le,e)}function X(e,n){var l=B(L++,3);!t.__s&&ne(l.__H,n)&&(l.__=e,l.i=n,P.__H.__h.push(l))}function J(e,t){var n=B(L++,7);return ne(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function K(){for(var e;e=V.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ee),e.__H.__h.forEach(te),e.__H.__h=[]}catch(n){e.__H.__h=[],t.__e(n,e.__v)}}t.__b=function(e){P=null,j&&j(e)},t.__r=function(e){R&&R(e),L=0;var t=(P=e.__c).__H;t&&(F===P?(t.__h=[],P.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=W,e.__N=e.i=void 0}))):(t.__h.forEach(ee),t.__h.forEach(te),t.__h=[])),F=P},t.diffed=function(e){$&&$(e);var n=e.__c;n&&n.__H&&(n.__H.__h.length&&(1!==V.push(n)&&D===t.requestAnimationFrame||((D=t.requestAnimationFrame)||Q)(K)),n.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==W&&(e.__=e.__V),e.i=void 0,e.__V=W}))),F=P=null},t.__c=function(e,n){n.some((function(e){try{e.__h.forEach(ee),e.__h=e.__h.filter((function(e){return!e.__||te(e)}))}catch(l){n.some((function(e){e.__h&&(e.__h=[])})),n=[],t.__e(l,e.__v)}})),O&&O(e,n)},t.unmount=function(e){z&&z(e);var n,l=e.__c;l&&l.__H&&(l.__H.__.forEach((function(e){try{ee(e)}catch(e){n=e}})),l.__H=void 0,n&&t.__e(n,l.__v))};var Z="function"==typeof requestAnimationFrame;function Q(e){var t,n=function(){clearTimeout(l),Z&&cancelAnimationFrame(t),setTimeout(e)},l=setTimeout(n,100);Z&&(t=requestAnimationFrame(n))}function ee(e){var t=P,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),P=t}function te(e){var t=P;e.__c=e.__(),P=t}function ne(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function le(e,t){return"function"==typeof t?t(e):t}const re="thisisadndkey123",oe=new TextEncoder,se=new TextDecoder;async function ie(){return crypto.subtle.importKey("raw",oe.encode(re),{name:"AES-CTR"},!1,["encrypt","decrypt"])}async function ce(e){const t=await ie(),n=crypto.getRandomValues(new Uint8Array(16)),l=oe.encode(e),r=await crypto.subtle.encrypt({name:"AES-CTR",counter:n,length:64},t,l),o=new Uint8Array(n.length+r.byteLength);return o.set(n),o.set(new Uint8Array(r),n.length),btoa(String.fromCharCode(...o))}async function _e(e){try{const t=Uint8Array.from(atob(e),(e=>e.charCodeAt(0))),n=t.slice(0,16),l=t.slice(16),r=await ie(),o=await crypto.subtle.decrypt({name:"AES-CTR",counter:n,length:64},r,l);return se.decode(o)}catch{return null}}function ae(e){return"object"==typeof e&&null!==e&&"number"==typeof e.slots&&"number"==typeof e.slotMax&&"boolean"==typeof e.slotsUnique}function ue(e){const t={slots:[],slotMax:[],slotsUnique:[],valid:!0};return e.slots<1&&(t.valid=!1,t.slots.push("Slots count must be at least 1")),e.slotMax<1&&(t.valid=!1,t.slotMax.push("Slot maximum must be at least 1")),e.slotsUnique&&e.slotMax<e.slots&&(t.valid=!1,t.slotMax.push("Slot max must be at least equal to the number of slots, if slots are unique")),t}function de(e){return{solution:he(e),guess:new Array(e.slots).fill(0),guesses:[],ended:void 0}}function he(e){if(e.slotsUnique){const t=Array.from({length:e.slotMax},((e,t)=>String(t+1)));for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t.slice(0,e.slots)}{const t=[];for(let n=0;n<e.slots;n++)t.push(String(Math.floor(Math.random()*e.slotMax)+1));return t}}function fe(e,t){const n=Array(e.length).fill("absent"),l=Array(t.length).fill(!1);for(let r=0;r<e.length;r++)e[r].toLowerCase()===t[r].toLowerCase()&&(n[r]="correct",l[r]=!0);for(let r=0;r<e.length;r++)if("absent"===n[r])for(let o=0;o<t.length;o++)if(!l[o]&&e[r].toLowerCase()===t[o].toLowerCase()){n[r]="misplaced",l[o]=!0;break}return n}function pe(e){const[t,n]=Y(e.settings.slots),[l,r]=Y(e.settings.slotMax),[o,s]=Y(e.settings.slotsUnique),[i,c]=Y("");X((()=>{const t=new URLSearchParams(window.location.search).get("code");t&&_e(t).then((t=>{if(!t)return;const[n,l]=t.split(":");if(!/^[\w ]+$/.test(n))return;const r=n.split("").map(String),o=parseInt(l,10),s=r.length,i={slots:s,slotMax:o,slotsUnique:new Set(r).size===s};if(ue(i).valid){e.setSettings(i);const t=de(i);t.solution=r,e.startGame(t)}}))}),[]);const _=ue({slots:t,slotMax:l,slotsUnique:o});return G("div",{class:"card",children:[G("div",{class:"card-header",children:"Game Setup"}),G("div",{class:"card-body",children:[G("div",{class:"row",children:[G("div",{class:"col-md mb-5",children:[G("label",{class:"form-label",for:"code-length",children:"Code Length"}),G("input",{class:"form-control"+(_.slots.length>0?" is-invalid":""),type:"number",id:"code-length",min:"1",max:"10",step:"1",value:t,onInput:e=>{n(parseInt(e.currentTarget.value))}}),G("div",{class:"form-text",children:"The number of slots in the code."}),_.slots.length>0&&G("div",{class:"invalid-feedback",children:_.slots.join(" ")})]}),G("div",{class:"col-md mb-5",children:[G("label",{class:"form-label",for:"code-max",children:"Code Number Max"}),G("input",{class:"form-control"+(_.slotMax.length>0?" is-invalid":""),type:"number",id:"code-max",min:"2",max:"10",step:"1",value:l,onInput:e=>{r(parseInt(e.currentTarget.value))}}),G("div",{class:"form-text",children:"The maximum number each slot in the code can be."}),_.slotMax.length>0&&G("div",{class:"invalid-feedback",children:_.slotMax.join(" ")})]}),G("div",{class:"col-md mb-5",children:[G("label",{class:"form-label",for:"code-unique",children:"Code Slots Unique"}),G("div",{class:"col-form-label",children:G("div",{class:"form-check form-switch",children:[G("input",{class:"form-check-input",type:"checkbox",id:"code-unique",checked:o,onChange:e=>{s(e.currentTarget.checked)}}),G("label",{class:"form-check-label",for:"code-unique",children:"Unique"})]})}),G("div",{class:"form-text",children:"Whether each slot in the code must be unique."})]})]}),G("div",{class:"d-flex justify-content-between align-items-center",children:G("button",{class:"btn btn-primary btn-lg",onClick:()=>{e.setSettings({slots:t,slotMax:l,slotsUnique:o}),e.startGame(de({slots:t,slotMax:l,slotsUnique:o}))},disabled:!_.valid,children:[G("i",{class:"bi bi-play-circle me-2"}),"Start Game"]})}),i&&G("div",{class:"mt-3",children:[G("label",{class:"form-label",children:"Shareable Game Link"}),G("input",{class:"form-control",value:i,readOnly:!0,onFocus:e=>e.currentTarget.select()})]})]})]})}function me(e){return G("div",{class:"card mt-3 border-warning",children:[G("div",{class:"card-header",children:"Solution"}),G("div",{class:"card-body",children:[G("div",{class:"row",children:e.solution.map(((e,t)=>G("div",{class:"col",children:G("div",{class:"card",children:G("div",{class:"card-body text-center h1",children:" "===e?G("span",{class:"text-muted",children:"_"}):e.toUpperCase()})})})))}),G("div",{class:"d-flex justify-content-end align-items-center mt-3",children:G("button",{class:"btn btn-primary btn-lg",onClick:e.newGame,children:[G("i",{class:"bi bi-arrow-repeat me-2"}),"New Game"]})})]})]})}function ve(e){const t=e.guess.guess,n=fe(e.guess.guess,e.solution);return G("div",{class:"card mt-3",children:[G("div",{class:"card-header",children:["Guess ",e.guessNumber]}),G("div",{class:"card-body",children:G("div",{class:"row",children:t.map(((e,t)=>{let l="bg-dark";return"correct"===n[t]?l="bg-success text-white":"misplaced"===n[t]&&(l="bg-warning text-dark"),G("div",{class:"col",children:G("div",{class:`card ${l}`,children:G("div",{class:"card-body text-center h1",children:" "===e?G("span",{class:"text-muted",children:"_"}):e})})},t)}))})})]})}function be(e){return G(h,{children:[G("div",{class:"modal d-block",role:"dialog",children:G("div",{class:"modal-dialog",children:G("div",{class:"modal-content",children:[G("div",{class:"modal-header",children:[G("h3",{class:"modal-title",children:"Help"}),G("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:e.close})]}),G("div",{class:"modal-body",children:[G("p",{children:"Hack.EXE is a game where you try to crack a secret password."}),G("p",{children:"The password is made up of a series of characters; each turn you attempt to guess the password. After each guess you will be told:"}),G("ul",{children:[G("li",{children:[G("span",{class:"text-success",children:[G("i",{class:"bi bi-check-circle me-1"}),"Correct"]}),": Highlighted characters are correct and in the correct position."]}),G("li",{children:[G("span",{class:"text-warning",children:[G("i",{class:"bi bi-exclamation-circle me-1"}),"Misplaced"]}),": Highlighted characters are in the password, but in the wrong position."]}),G("li",{children:[G("span",{children:[G("i",{class:"bi bi-x-circle me-1"}),"Incorrect"]}),": Unhighlighted characters are not in the password."]})]}),G("p",{class:"mb-0",children:"You win when you guess the whole code."})]})]})})}),G("div",{class:"modal-backdrop fade show"})]})}function ge(e){const[t,n]=Y(!1),l=(r=[],I=5,J((function(){return{current:r}}),[]));var r;const[o,s]=Y(Array(e.settings.slots).fill("")),i=t=>{n(!0);if(!t.every((e=>1===e.length)))return;const r=fe(t,e.solution);e.addGuess(t);const o=t.map(((e,t)=>"correct"===r[t]?e:""));return s(o),requestAnimationFrame((()=>{l.current[0]?.focus()})),console.log("Guess:",t),n(!1),e.addGuess(t)},c=new Set(o).size===o.length;return G("div",{class:"card",children:[G("div",{class:"card-header",children:"New Guess"}),G("div",{class:"card-body",children:[G("div",{class:"row",children:o.map(((n,r)=>G("div",{class:"col",children:G("input",{class:'form-control form-control-lg text-center" '+(t&&""===o[r]?"is-invalid":""),type:"text",maxLength:1,value:o[r],ref:e=>l.current[r]=e,onKeyDown:t=>{const n=t.key;if("Enter"!==n){if("Backspace"===n){const e=[...o];e[r]="",s(e),r>0&&l.current[r-1]?.focus(),t.preventDefault()}else if(/^[a-zA-Z0-9 ]$/.test(n)){const e=[...o];e[r]=" "===n?" ":n.toUpperCase(),s(e),r<l.current.length-1&&requestAnimationFrame((()=>{l.current[r+1]?.focus()})),t.preventDefault()}}else{!e.disabled&&(!e.settings.slotsUnique||new Set(o).size===o.length)&&o.every((e=>1===e.length))&&i(o)}},onFocus:e=>e.currentTarget.select(),disabled:e.disabled})})))}),G("div",{class:"d-flex justify-content-between align-items-center mt-3",children:[G("span",{class:"text-danger",children:[e.settings.slotsUnique&&!c&&t&&"Your guess cannot contain duplicate numbers.",!o.every((e=>1===e.length))&&t&&"Your guess can't contain null strings."]}),G("div",{children:G("button",{class:"btn btn-primary btn-lg",onClick:()=>i(o),disabled:e.settings.slotsUnique&&!c||e.disabled,children:[G("i",{class:"bi bi-check-circle me-2"}),"Guess"]})})]})]})]})}function ye(e){return G("div",{class:"card mt-3 border-success",children:[G("div",{class:"card-header",children:"Victory!"}),G("div",{class:"card-body",children:[G("div",{class:"card-text text-success h1",children:[G("i",{class:"bi bi-trophy me-2"}),"You won!"]}),G("div",{class:"d-flex justify-content-end align-items-center mt-3",children:G("button",{class:"btn btn-primary btn-lg",onClick:()=>{const t=window.location.origin+window.location.pathname;window.history.replaceState({},"",t),e.newGame()},children:[G("i",{class:"bi bi-arrow-repeat me-2"}),"New Game"]})})]})]})}function we(){const[e,t]=Y((()=>{const e=localStorage.getItem("settings");if(null!==e)try{const t=JSON.parse(e);if(ae(t))return t}catch(e){console.warn("Failed to parse stored settings",e)}return{slots:4,slotMax:6,slotsUnique:!0}}));return X((()=>{localStorage.setItem("settings",JSON.stringify(e))}),[e]),[e,t]}function ke(e,t){const n=new Set,l=e.reduce(((e,l,r)=>l.toLowerCase()===t[r].toLowerCase()?(n.add(r),e+1):e),0),r=e.reduce(((e,l,r)=>{for(let r=0;r<t.length;r++)if(!n.has(r)&&l.toLowerCase()===t[r].toLowerCase())return n.add(r),e+1;return e}),0);return{guess:e,correct:l,misplaced:r}}window.location.pathname;"#encode"==location.hash?T(G((function(){const[e,t]=Y(""),[n,l]=Y(null),[r,o]=Y(null);return G("div",{class:"container mx-auto my-5",children:[G("div",{class:"d-flex justify-content-between align-items-center mb-5 flex-wrap",children:G("h1",{children:"Encode.EXE"})}),G("div",{class:"card mt-4",children:[G("div",{class:"card-header",children:"Generate Shareable Game Link"}),G("div",{class:"card-body",children:[G("label",{class:"form-label",for:"codeInput",children:["Enter the secret code (e.g. ",G("code",{children:"1234"}),")"]}),G("input",{type:"text",id:"codeInput",class:"form-control mb-2",value:e,onInput:e=>t(e.currentTarget.value),placeholder:"1234"}),G("button",{class:"btn btn-primary",onClick:async()=>{if(!/^[\w ]+(:\w)?$/.test(e))return o("Code must be a string of characters with an optional ':{maxSlots}'(e.g., 1234)"),void l(null);const t=await ce(e),n=`?code=${encodeURIComponent(t)}`;l(n),o(null)},children:"Generate Link"}),r&&G("div",{class:"alert alert-danger mt-3",children:r}),n&&G("div",{class:"mt-3",children:[G("label",{class:"form-label",children:"Shareable Game Link"}),G("input",{class:"form-control",readOnly:!0,value:n,onFocus:e=>e.currentTarget.select()})]})]})]})]})}),{}),document.body):T(G((function(){const[e,t]=we(),[n,l]=Y(null),[r,o]=Y(!1);return G("div",{class:"container mx-auto my-5",children:[G("div",{class:"d-flex justify-content-between align-items-center mb-5 flex-wrap",children:[G("h1",{children:"Hack.EXE"}),G("div",{children:G("button",{class:"btn btn-info me-2",onClick:()=>o(!0),children:[G("i",{class:"bi bi-question-circle me-2"}),"Help"]})})]}),null===n&&G(pe,{settings:e,setSettings:t,startGame:l}),null!==n&&G(h,{children:[G(ge,{settings:e,addGuess:t=>{const r=ke(t,n.solution);l({...n,guesses:[...n.guesses,r],ended:r.correct===e.slots?"won":void 0})},giveUp:()=>{l({...n,ended:"gaveUp"})},disabled:void 0!==n.ended,solution:n.solution}),"won"===n.ended&&G(ye,{newGame:()=>l(null)}),"gaveUp"===n.ended&&G(me,{solution:n.solution,newGame:()=>l(null)}),n.guesses.slice().reverse().map(((e,t)=>G(ve,{guess:e,guessNumber:n.guesses.length-t,solution:n.solution},t)))]}),r&&G(be,{close:()=>o(!1)})]})}),{}),document.body);
//# sourceMappingURL=index.de2ba76f.js.map
