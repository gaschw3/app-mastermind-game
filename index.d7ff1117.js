var e,t,n,l,r,o,i,s={},c=[],a=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function _(e,t){for(var n in t)e[n]=t[n];return e}function u(e){var t=e.parentNode;t&&t.removeChild(e)}function d(e,l,r,o,i){var s={type:e,props:l,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++n:i};return null==i&&null!=t.vnode&&t.vnode(s),s}function h(e){return e.children}function f(e,t){this.props=e,this.context=t}function p(e,t){if(null==t)return e.__?p(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?p(e):null}function m(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return m(e)}}function v(e){(!e.__d&&(e.__d=!0)&&l.push(e)&&!g.__r++||r!==t.debounceRendering)&&((r=t.debounceRendering)||o)(g)}function g(){var e,t,n,r,o,s,c,a;for(l.sort(i);e=l.shift();)e.__d&&(t=l.length,r=void 0,o=void 0,c=(s=(n=e).__v).__e,(a=n.__P)&&(r=[],(o=_({},s)).__v=s.__v+1,A(a,s,o,n.__n,void 0!==a.ownerSVGElement,null!=s.__h?[c]:null,r,null==c?p(s):c,s.__h),E(r,s),s.__e!=c&&m(s)),l.length>t&&l.sort(i));g.__r=0}function b(e,t,n,l,r,o,i,a,_,u){var f,m,v,g,b,x,C,S=l&&l.__k||c,U=S.length;for(n.__k=[],f=0;f<t.length;f++)if(null!=(g=n.__k[f]=null==(g=t[f])||"boolean"==typeof g||"function"==typeof g?null:"string"==typeof g||"number"==typeof g||"bigint"==typeof g?d(null,g,null,null,g):Array.isArray(g)?d(h,{children:g},null,null,null):g.__b>0?d(g.type,g.props,g.key,g.ref?g.ref:null,g.__v):g)){if(g.__=n,g.__b=n.__b+1,null===(v=S[f])||v&&g.key==v.key&&g.type===v.type)S[f]=void 0;else for(m=0;m<U;m++){if((v=S[m])&&g.key==v.key&&g.type===v.type){S[m]=void 0;break}v=null}A(e,g,v=v||s,r,o,i,a,_,u),b=g.__e,(m=g.ref)&&v.ref!=m&&(C||(C=[]),v.ref&&C.push(v.ref,null,g),C.push(m,g.__c||b,g)),null!=b?(null==x&&(x=b),"function"==typeof g.type&&g.__k===v.__k?g.__d=_=y(g,_,e):_=w(e,g,v,S,b,_),"function"==typeof n.type&&(n.__d=_)):_&&v.__e==_&&_.parentNode!=e&&(_=p(v))}for(n.__e=x,f=U;f--;)null!=S[f]&&("function"==typeof n.type&&null!=S[f].__e&&S[f].__e==n.__d&&(n.__d=k(l).nextSibling),M(S[f],S[f]));if(C)for(f=0;f<C.length;f++)H(C[f],C[++f],C[++f])}function y(e,t,n){for(var l,r=e.__k,o=0;r&&o<r.length;o++)(l=r[o])&&(l.__=e,t="function"==typeof l.type?y(l,t,n):w(n,l,l,r,l.__e,t));return t}function w(e,t,n,l,r,o){var i,s,c;if(void 0!==t.__d)i=t.__d,t.__d=void 0;else if(null==n||r!=o||null==r.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(r),i=null;else{for(s=o,c=0;(s=s.nextSibling)&&c<l.length;c+=1)if(s==r)break e;e.insertBefore(r,o),i=o}return void 0!==i?i:r.nextSibling}function k(e){var t,n,l;if(null==e.type||"string"==typeof e.type)return e.__e;if(e.__k)for(t=e.__k.length-1;t>=0;t--)if((n=e.__k[t])&&(l=k(n)))return l;return null}function x(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||a.test(t)?n:n+"px"}function C(e,t,n,l,r){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof l&&(e.style.cssText=l=""),l)for(t in l)n&&t in n||x(e.style,t,"");if(n)for(t in n)l&&n[t]===l[t]||x(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?l||e.addEventListener(t,o?U:S,o):e.removeEventListener(t,o?U:S,o);else if("dangerouslySetInnerHTML"!==t){if(r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function S(e){return this.l[e.type+!1](t.event?t.event(e):e)}function U(e){return this.l[e.type+!0](t.event?t.event(e):e)}function A(n,l,r,o,i,c,a,d,m){var v,g,y,w,k,x,S,U,A,E,H,M,T,q,G,L=l.type;if(void 0!==l.constructor)return null;null!=r.__h&&(m=r.__h,d=l.__e=r.__e,l.__h=null,c=[d]),(v=t.__b)&&v(l);try{e:if("function"==typeof L){if(U=l.props,A=(v=L.contextType)&&o[v.__c],E=v?A?A.props.value:v.__:o,r.__c?S=(g=l.__c=r.__c).__=g.__E:("prototype"in L&&L.prototype.render?l.__c=g=new L(U,E):(l.__c=g=new f(U,E),g.constructor=L,g.render=N),A&&A.sub(g),g.props=U,g.state||(g.state={}),g.context=E,g.__n=o,y=g.__d=!0,g.__h=[],g._sb=[]),null==g.__s&&(g.__s=g.state),null!=L.getDerivedStateFromProps&&(g.__s==g.state&&(g.__s=_({},g.__s)),_(g.__s,L.getDerivedStateFromProps(U,g.__s))),w=g.props,k=g.state,g.__v=l,y)null==L.getDerivedStateFromProps&&null!=g.componentWillMount&&g.componentWillMount(),null!=g.componentDidMount&&g.__h.push(g.componentDidMount);else{if(null==L.getDerivedStateFromProps&&U!==w&&null!=g.componentWillReceiveProps&&g.componentWillReceiveProps(U,E),!g.__e&&null!=g.shouldComponentUpdate&&!1===g.shouldComponentUpdate(U,g.__s,E)||l.__v===r.__v){for(l.__v!==r.__v&&(g.props=U,g.state=g.__s,g.__d=!1),g.__e=!1,l.__e=r.__e,l.__k=r.__k,l.__k.forEach((function(e){e&&(e.__=l)})),H=0;H<g._sb.length;H++)g.__h.push(g._sb[H]);g._sb=[],g.__h.length&&a.push(g);break e}null!=g.componentWillUpdate&&g.componentWillUpdate(U,g.__s,E),null!=g.componentDidUpdate&&g.__h.push((function(){g.componentDidUpdate(w,k,x)}))}if(g.context=E,g.props=U,g.__P=n,M=t.__r,T=0,"prototype"in L&&L.prototype.render){for(g.state=g.__s,g.__d=!1,M&&M(l),v=g.render(g.props,g.state,g.context),q=0;q<g._sb.length;q++)g.__h.push(g._sb[q]);g._sb=[]}else do{g.__d=!1,M&&M(l),v=g.render(g.props,g.state,g.context),g.state=g.__s}while(g.__d&&++T<25);g.state=g.__s,null!=g.getChildContext&&(o=_(_({},o),g.getChildContext())),y||null==g.getSnapshotBeforeUpdate||(x=g.getSnapshotBeforeUpdate(w,k)),G=null!=v&&v.type===h&&null==v.key?v.props.children:v,b(n,Array.isArray(G)?G:[G],l,r,o,i,c,a,d,m),g.base=l.__e,l.__h=null,g.__h.length&&a.push(g),S&&(g.__E=g.__=null),g.__e=!1}else null==c&&l.__v===r.__v?(l.__k=r.__k,l.__e=r.__e):l.__e=function(t,n,l,r,o,i,c,a){var _,d,h,f=l.props,m=n.props,v=n.type,g=0;if("svg"===v&&(o=!0),null!=i)for(;g<i.length;g++)if((_=i[g])&&"setAttribute"in _==!!v&&(v?_.localName===v:3===_.nodeType)){t=_,i[g]=null;break}if(null==t){if(null===v)return document.createTextNode(m);t=o?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,m.is&&m),i=null,a=!1}if(null===v)f===m||a&&t.data===m||(t.data=m);else{if(i=i&&e.call(t.childNodes),d=(f=l.props||s).dangerouslySetInnerHTML,h=m.dangerouslySetInnerHTML,!a){if(null!=i)for(f={},g=0;g<t.attributes.length;g++)f[t.attributes[g].name]=t.attributes[g].value;(h||d)&&(h&&(d&&h.__html==d.__html||h.__html===t.innerHTML)||(t.innerHTML=h&&h.__html||""))}if(function(e,t,n,l,r){var o;for(o in n)"children"===o||"key"===o||o in t||C(e,o,null,n[o],l);for(o in t)r&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===t[o]||C(e,o,t[o],n[o],l)}(t,m,f,o,a),h)n.__k=[];else if(g=n.props.children,b(t,Array.isArray(g)?g:[g],n,l,r,o&&"foreignObject"!==v,i,c,i?i[0]:l.__k&&p(l,0),a),null!=i)for(g=i.length;g--;)null!=i[g]&&u(i[g]);a||("value"in m&&void 0!==(g=m.value)&&(g!==t.value||"progress"===v&&!g||"option"===v&&g!==f.value)&&C(t,"value",g,f.value,!1),"checked"in m&&void 0!==(g=m.checked)&&g!==t.checked&&C(t,"checked",g,f.checked,!1))}return t}(r.__e,l,r,o,i,c,a,m);(v=t.diffed)&&v(l)}catch(n){l.__v=null,(m||null!=c)&&(l.__e=d,l.__h=!!m,c[c.indexOf(d)]=null),t.__e(n,l,r)}}function E(e,n){t.__c&&t.__c(n,e),e.some((function(n){try{e=n.__h,n.__h=[],e.some((function(e){e.call(n)}))}catch(e){t.__e(e,n.__v)}}))}function H(e,n,l){try{"function"==typeof e?e(n):e.current=n}catch(e){t.__e(e,l)}}function M(e,n,l){var r,o;if(t.unmount&&t.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||H(r,null,n)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){t.__e(e,n)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&M(r[o],n,l||"function"!=typeof e.type);l||null==e.__e||u(e.__e),e.__=e.__e=e.__d=void 0}function N(e,t,n){return this.constructor(e,n)}function T(n,l,r){var o,i,c;t.__&&t.__(n,l),i=(o="function"==typeof r)?null:r&&r.__k||l.__k,c=[],A(l,n=(!o&&r||l).__k=function(t,n,l){var r,o,i,s={};for(i in n)"key"==i?r=n[i]:"ref"==i?o=n[i]:s[i]=n[i];if(arguments.length>2&&(s.children=arguments.length>3?e.call(arguments,2):l),"function"==typeof t&&null!=t.defaultProps)for(i in t.defaultProps)void 0===s[i]&&(s[i]=t.defaultProps[i]);return d(t,s,r,o,null)}(h,null,[n]),i||s,s,void 0!==l.ownerSVGElement,!o&&r?[r]:i?null:l.firstChild?e.call(l.childNodes):null,c,!o&&r?r:i?i.__e:l.firstChild,o),E(c,n)}e=c.slice,t={__e:function(e,t,n,l){for(var r,o,i;t=t.__;)if((r=t.__c)&&!r.__)try{if((o=r.constructor)&&null!=o.getDerivedStateFromError&&(r.setState(o.getDerivedStateFromError(e)),i=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,l||{}),i=r.__d),i)return r.__E=r}catch(t){e=t}throw e}},n=0,f.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=_({},this.state),"function"==typeof e&&(e=e(_({},n),this.props)),e&&_(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),v(this))},f.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),v(this))},f.prototype.render=h,l=[],o="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,i=function(e,t){return e.__v.__b-t.__v.__b},g.__r=0;var q=0;function G(e,n,l,r,o,i){var s,c,a={};for(c in n)"ref"==c?s=n[c]:a[c]=n[c];var _={type:e,props:a,key:l,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--q,__source:o,__self:i};if("function"==typeof e&&(s=e.defaultProps))for(c in s)void 0===a[c]&&(a[c]=s[c]);return t.vnode&&t.vnode(_),_}var L,P,F,D,I=0,V=[],W=[],j=t.__b,R=t.__r,$=t.diffed,O=t.__c,z=t.unmount;function B(e,n){t.__h&&t.__h(P,e,I||n),I=0;var l=P.__H||(P.__H={__:[],__h:[]});return e>=l.__.length&&l.__.push({__V:W}),l.__[e]}function Y(e){return I=1,function(e,t,n){var l=B(L++,2);if(l.t=e,!l.__c&&(l.__=[n?n(t):le(void 0,t),function(e){var t=l.__N?l.__N[0]:l.__[0],n=l.t(t,e);t!==n&&(l.__N=[n,l.__[1]],l.__c.setState({}))}],l.__c=P,!P.u)){var r=function(e,t,n){if(!l.__c.__H)return!0;var r=l.__c.__H.__.filter((function(e){return e.__c}));if(r.every((function(e){return!e.__N})))return!o||o.call(this,e,t,n);var i=!1;return r.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(i=!0)}})),!(!i&&l.__c.props===e)&&(!o||o.call(this,e,t,n))};P.u=!0;var o=P.shouldComponentUpdate,i=P.componentWillUpdate;P.componentWillUpdate=function(e,t,n){if(this.__e){var l=o;o=void 0,r(e,t,n),o=l}i&&i.call(this,e,t,n)},P.shouldComponentUpdate=r}return l.__N||l.__}(le,e)}function K(e,n){var l=B(L++,3);!t.__s&&ne(l.__H,n)&&(l.__=e,l.i=n,P.__H.__h.push(l))}function X(e,t){var n=B(L++,7);return ne(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Z(){for(var e;e=V.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ee),e.__H.__h.forEach(te),e.__H.__h=[]}catch(n){e.__H.__h=[],t.__e(n,e.__v)}}t.__b=function(e){P=null,j&&j(e)},t.__r=function(e){R&&R(e),L=0;var t=(P=e.__c).__H;t&&(F===P?(t.__h=[],P.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=W,e.__N=e.i=void 0}))):(t.__h.forEach(ee),t.__h.forEach(te),t.__h=[])),F=P},t.diffed=function(e){$&&$(e);var n=e.__c;n&&n.__H&&(n.__H.__h.length&&(1!==V.push(n)&&D===t.requestAnimationFrame||((D=t.requestAnimationFrame)||Q)(Z)),n.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==W&&(e.__=e.__V),e.i=void 0,e.__V=W}))),F=P=null},t.__c=function(e,n){n.some((function(e){try{e.__h.forEach(ee),e.__h=e.__h.filter((function(e){return!e.__||te(e)}))}catch(l){n.some((function(e){e.__h&&(e.__h=[])})),n=[],t.__e(l,e.__v)}})),O&&O(e,n)},t.unmount=function(e){z&&z(e);var n,l=e.__c;l&&l.__H&&(l.__H.__.forEach((function(e){try{ee(e)}catch(e){n=e}})),l.__H=void 0,n&&t.__e(n,l.__v))};var J="function"==typeof requestAnimationFrame;function Q(e){var t,n=function(){clearTimeout(l),J&&cancelAnimationFrame(t),setTimeout(e)},l=setTimeout(n,100);J&&(t=requestAnimationFrame(n))}function ee(e){var t=P,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),P=t}function te(e){var t=P;e.__c=e.__(),P=t}function ne(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function le(e,t){return"function"==typeof t?t(e):t}const re="thisisadndkey123",oe=new TextEncoder,ie=new TextDecoder;async function se(){return crypto.subtle.importKey("raw",oe.encode(re),{name:"AES-CTR"},!1,["encrypt","decrypt"])}async function ce(e){const t=await se(),n=crypto.getRandomValues(new Uint8Array(16)),l=oe.encode(e),r=await crypto.subtle.encrypt({name:"AES-CTR",counter:n,length:64},t,l),o=new Uint8Array(n.length+r.byteLength);return o.set(n),o.set(new Uint8Array(r),n.length),btoa(String.fromCharCode(...o))}async function ae(e){try{const t=Uint8Array.from(atob(e),(e=>e.charCodeAt(0))),n=t.slice(0,16),l=t.slice(16),r=await se(),o=await crypto.subtle.decrypt({name:"AES-CTR",counter:n,length:64},r,l);return ie.decode(o)}catch{return null}}function _e(e){return"object"==typeof e&&null!==e&&"number"==typeof e.slots&&"number"==typeof e.slotMax&&"boolean"==typeof e.slotsUnique}function ue(e){const t={slots:[],slotMax:[],slotsUnique:[],valid:!0};return e.slots<1&&(t.valid=!1,t.slots.push("Slots count must be at least 1")),e.slotMax<1&&(t.valid=!1,t.slotMax.push("Slot maximum must be at least 1")),e.slotsUnique&&e.slotMax<e.slots&&(t.valid=!1,t.slotMax.push("Slot max must be at least equal to the number of slots, if slots are unique")),t}function de(e){return{solution:he(e),guess:new Array(e.slots).fill(0),guesses:[],ended:void 0}}function he(e){const t=function(e){if(10===e)return Array.from({length:10},((e,t)=>String(t)));if(26===e)return Array.from({length:26},((e,t)=>String.fromCharCode(65+t)));if(36===e){const e=[];for(let t=0;t<10;t++)e.push(String(t));for(let t=0;t<26;t++)e.push(String.fromCharCode(65+t));return e}if(94===e){const e=[];for(let t=32;t<=126;t++)e.push(String.fromCharCode(t));return e}return Array.from({length:e},((e,t)=>String(t)))}(e.slotMax);if(e.slotsUnique){const n=[...t];for(let e=n.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}return n.slice(0,e.slots)}{const n=[];for(let l=0;l<e.slots;l++){const e=Math.floor(Math.random()*t.length);n.push(t[e])}return n}}function fe(e,t){const n=Array(e.length).fill("absent"),l=Array(t.length).fill(!1);for(let r=0;r<e.length;r++)e[r].toLowerCase()===t[r].toLowerCase()&&(n[r]="correct",l[r]=!0);for(let r=0;r<e.length;r++)if("absent"===n[r])for(let o=0;o<t.length;o++)if(!l[o]&&e[r].toLowerCase()===t[o].toLowerCase()){n[r]="misplaced",l[o]=!0;break}return n}const pe={numeric:10,alpha:26,alphanumeric:36,"full-keyboard":94},me=e=>10===e?"numeric":26===e?"alpha":36===e?"alphanumeric":94===e?"full-keyboard":"numeric";function ve(e){const[t,n]=Y(e.settings.slots),[l,r]=Y(e.settings.slotMax),[o,i]=Y(me(e.settings.slotMax)),[s,c]=Y(e.settings.slotsUnique),[a,_]=Y("");K((()=>{const t=new URLSearchParams(window.location.search).get("code");t&&ae(t).then((t=>{if(!t)return;const[n,l]=t.split(":");if(!/^[\w ]+$/.test(n))return;const r=n.split("").map(String),o=parseInt(l,10),i=r.length,s={slots:i,slotMax:o,slotsUnique:new Set(r).size===i};if(ue(s).valid){e.setSettings(s);const t=de(s);t.solution=r,e.startGame(t)}}))}),[]);const u=ue({slots:t,slotMax:l,slotsUnique:s});return G("div",{class:"card",children:[G("div",{class:"card-header",children:"Game Setup"}),G("div",{class:"card-body",children:[G("div",{class:"row",children:[G("div",{class:"col-md mb-5",children:[G("label",{class:"form-label",for:"code-length",children:"Code Length"}),G("input",{class:"form-control"+(u.slots.length>0?" is-invalid":""),type:"number",id:"code-length",min:"1",max:"10",step:"1",value:t,onInput:e=>{n(parseInt(e.currentTarget.value))}}),G("div",{class:"form-text",children:"The number of slots in the code."}),u.slots.length>0&&G("div",{class:"invalid-feedback",children:u.slots.join(" ")})]}),G("div",{class:"col-md mb-5",children:[G("label",{class:"form-label",for:"code-max",children:"Code Character Set"}),G("select",{class:"form-control"+(u.slotMax.length>0?" is-invalid":""),id:"code-max",value:o,onChange:e=>{var t;t=e.currentTarget.value,i(t),r(pe[t])},children:[G("option",{value:"numeric",children:"Numeric (0-9)"}),G("option",{value:"alpha",children:"Alphabetic (A-Z)"}),G("option",{value:"alphanumeric",children:"Alphanumeric (0-9, A-Z)"}),G("option",{value:"full-keyboard",children:"Full Keyboard"})]}),G("div",{class:"form-text",children:"The character set available for each slot in the code."}),u.slotMax.length>0&&G("div",{class:"invalid-feedback",children:u.slotMax.join(" ")})]}),G("div",{class:"col-md mb-5",children:[G("label",{class:"form-label",for:"code-unique",children:"Code Slots Unique"}),G("div",{class:"col-form-label",children:G("div",{class:"form-check form-switch",children:[G("input",{class:"form-check-input",type:"checkbox",id:"code-unique",checked:s,onChange:e=>{c(e.currentTarget.checked)}}),G("label",{class:"form-check-label",for:"code-unique",children:"Unique"})]})}),G("div",{class:"form-text",children:"Whether each slot in the code must be unique."})]})]}),G("div",{class:"d-flex justify-content-between align-items-center",children:G("button",{class:"btn btn-primary btn-lg",onClick:()=>{e.setSettings({slots:t,slotMax:l,slotsUnique:s}),e.startGame(de({slots:t,slotMax:l,slotsUnique:s}))},disabled:!u.valid,children:[G("i",{class:"bi bi-play-circle me-2"}),"Start Game"]})}),a&&G("div",{class:"mt-3",children:[G("label",{class:"form-label",children:"Shareable Game Link"}),G("input",{class:"form-control",value:a,readOnly:!0,onFocus:e=>e.currentTarget.select()})]})]})]})}function ge(e){return G("div",{class:"card mt-3 border-warning",children:[G("div",{class:"card-header",children:"Solution"}),G("div",{class:"card-body",children:[G("div",{class:"row",children:e.solution.map(((e,t)=>G("div",{class:"col",children:G("div",{class:"card",children:G("div",{class:"card-body text-center h1",children:" "===e?G("span",{class:"text-muted",children:"_"}):e.toUpperCase()})})})))}),G("div",{class:"d-flex justify-content-end align-items-center mt-3",children:G("button",{class:"btn btn-primary btn-lg",onClick:e.newGame,children:[G("i",{class:"bi bi-arrow-repeat me-2"}),"New Game"]})})]})]})}function be(e){const t=e.guess.guess,n=fe(e.guess.guess,e.solution);return G("div",{class:"card mt-3",children:[G("div",{class:"card-header",children:["Guess ",e.guessNumber]}),G("div",{class:"card-body",children:G("div",{class:"row",children:t.map(((e,t)=>{let l="bg-dark";return"correct"===n[t]?l="bg-success text-white":"misplaced"===n[t]&&(l="bg-warning text-dark"),G("div",{class:"col",children:G("div",{class:`card ${l}`,children:G("div",{class:"card-body text-center h1",children:" "===e?G("span",{class:"text-muted",children:"_"}):e})})},t)}))})})]})}function ye(e){return G(h,{children:[G("div",{class:"modal d-block",role:"dialog",children:G("div",{class:"modal-dialog",children:G("div",{class:"modal-content",children:[G("div",{class:"modal-header",children:[G("h3",{class:"modal-title",children:"Help"}),G("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:e.close})]}),G("div",{class:"modal-body",children:[G("p",{children:"Hack.EXE is a game where you try to crack a secret password."}),G("p",{children:"The password is made up of a series of characters; each turn you attempt to guess the password. After each guess you will be told:"}),G("ul",{children:[G("li",{children:[G("span",{class:"text-success",children:[G("i",{class:"bi bi-check-circle me-1"}),"Correct"]}),": Highlighted characters are correct and in the correct position."]}),G("li",{children:[G("span",{class:"text-warning",children:[G("i",{class:"bi bi-exclamation-circle me-1"}),"Misplaced"]}),": Highlighted characters are in the password, but in the wrong position."]}),G("li",{children:[G("span",{children:[G("i",{class:"bi bi-x-circle me-1"}),"Incorrect"]}),": Unhighlighted characters are not in the password."]})]}),G("p",{class:"mb-0",children:"You win when you guess the whole code."})]})]})})}),G("div",{class:"modal-backdrop fade show"})]})}function we(e){const[t,n]=Y(!1),l=(r=[],I=5,X((function(){return{current:r}}),[]));var r;const[o,i]=Y(Array(e.settings.slots).fill("")),s=t=>{n(!0);if(!t.every((e=>1===e.length)))return;const r=fe(t,e.solution);e.addGuess(t);const o=t.map(((e,t)=>"correct"===r[t]?e:""));return i(o),requestAnimationFrame((()=>{l.current[0]?.focus()})),console.log("Guess:",t),n(!1),e.addGuess(t)},c=new Set(o).size===o.length;return G("div",{class:"card",children:[G("div",{class:"card-header",children:"New Guess"}),G("div",{class:"card-body",children:[G("div",{class:"row",children:o.map(((n,r)=>G("div",{class:"col",children:G("input",{class:'form-control form-control-lg text-center" '+(t&&""===o[r]?"is-invalid":""),type:"text",maxLength:1,value:o[r],ref:e=>l.current[r]=e,onKeyDown:t=>{const n=t.key;if("Enter"!==n){if("Backspace"===n){const e=[...o];e[r]="",i(e),r>0&&l.current[r-1]?.focus(),t.preventDefault()}else if(/^[a-zA-Z0-9 ]$/.test(n)){const e=[...o];e[r]=" "===n?" ":n.toUpperCase(),i(e),r<l.current.length-1&&requestAnimationFrame((()=>{l.current[r+1]?.focus()})),t.preventDefault()}}else{!e.disabled&&(!e.settings.slotsUnique||new Set(o).size===o.length)&&o.every((e=>1===e.length))&&s(o)}},onFocus:e=>e.currentTarget.select(),disabled:e.disabled})})))}),G("div",{class:"d-flex justify-content-between align-items-center mt-3",children:[G("span",{class:"text-danger",children:[e.settings.slotsUnique&&!c&&t&&"Your guess cannot contain duplicate numbers.",!o.every((e=>1===e.length))&&t&&"Your guess can't contain null strings."]}),G("div",{children:G("button",{class:"btn btn-primary btn-lg",onClick:()=>s(o),disabled:e.settings.slotsUnique&&!c||e.disabled,children:[G("i",{class:"bi bi-check-circle me-2"}),"Guess"]})})]})]})]})}function ke(e){return G("div",{class:"card mt-3 border-success",children:[G("div",{class:"card-header",children:"Victory!"}),G("div",{class:"card-body",children:[G("div",{class:"card-text text-success h1",children:[G("i",{class:"bi bi-trophy me-2"}),"You won!"]}),G("div",{class:"d-flex justify-content-end align-items-center mt-3",children:G("button",{class:"btn btn-primary btn-lg",onClick:()=>{const t=window.location.origin+window.location.pathname;window.history.replaceState({},"",t),e.newGame()},children:[G("i",{class:"bi bi-arrow-repeat me-2"}),"New Game"]})})]})]})}function xe(){const[e,t]=Y((()=>{const e=localStorage.getItem("settings");if(null!==e)try{const t=JSON.parse(e);if(_e(t))return t}catch(e){console.warn("Failed to parse stored settings",e)}return{slots:4,slotMax:6,slotsUnique:!0}}));return K((()=>{localStorage.setItem("settings",JSON.stringify(e))}),[e]),[e,t]}function Ce(e,t){const n=new Set,l=e.reduce(((e,l,r)=>l.toLowerCase()===t[r].toLowerCase()?(n.add(r),e+1):e),0),r=e.reduce(((e,l,r)=>{for(let r=0;r<t.length;r++)if(!n.has(r)&&l.toLowerCase()===t[r].toLowerCase())return n.add(r),e+1;return e}),0);return{guess:e,correct:l,misplaced:r}}window.location.pathname;"#encode"==location.hash?T(G((function(){const[e,t]=Y(""),[n,l]=Y(null),[r,o]=Y(null);return G("div",{class:"container mx-auto my-5",children:[G("div",{class:"d-flex justify-content-between align-items-center mb-5 flex-wrap",children:G("h1",{children:"Encode.EXE"})}),G("div",{class:"card mt-4",children:[G("div",{class:"card-header",children:"Generate Shareable Game Link"}),G("div",{class:"card-body",children:[G("label",{class:"form-label",for:"codeInput",children:["Enter the secret code (e.g. ",G("code",{children:"1234"}),")"]}),G("input",{type:"text",id:"codeInput",class:"form-control mb-2",value:e,onInput:e=>t(e.currentTarget.value),placeholder:"1234"}),G("button",{class:"btn btn-primary",onClick:async()=>{if(!/^[\w ]+(:\w)?$/.test(e))return o("Code must be a string of characters with an optional ':{maxSlots}'(e.g., 1234)"),void l(null);const t=await ce(e),n=`?code=${encodeURIComponent(t)}`;l(n),o(null)},children:"Generate Link"}),r&&G("div",{class:"alert alert-danger mt-3",children:r}),n&&G("div",{class:"mt-3",children:[G("label",{class:"form-label",children:"Shareable Game Link"}),G("input",{class:"form-control",readOnly:!0,value:n,onFocus:e=>e.currentTarget.select()})]})]})]})]})}),{}),document.body):T(G((function(){const[e,t]=xe(),[n,l]=Y(null),[r,o]=Y(!1);return G("div",{class:"container mx-auto my-5",children:[G("div",{class:"d-flex justify-content-between align-items-center mb-5 flex-wrap",children:[G("h1",{children:"Hack.EXE"}),G("div",{children:G("button",{class:"btn btn-info me-2",onClick:()=>o(!0),children:[G("i",{class:"bi bi-question-circle me-2"}),"Help"]})})]}),null===n&&G(ve,{settings:e,setSettings:t,startGame:l}),null!==n&&G(h,{children:[G(we,{settings:e,addGuess:t=>{const r=Ce(t,n.solution);l({...n,guesses:[...n.guesses,r],ended:r.correct===e.slots?"won":void 0})},giveUp:()=>{l({...n,ended:"gaveUp"})},disabled:void 0!==n.ended,solution:n.solution}),"won"===n.ended&&G(ke,{newGame:()=>l(null)}),"gaveUp"===n.ended&&G(ge,{solution:n.solution,newGame:()=>l(null)}),n.guesses.slice().reverse().map(((e,t)=>G(be,{guess:e,guessNumber:n.guesses.length-t,solution:n.solution},t)))]}),r&&G(ye,{close:()=>o(!1)})]})}),{}),document.body);
//# sourceMappingURL=index.d7ff1117.js.map
